export type Language = 'en';

// Initialize language variable immediately with default value
let language: Language = 'en';

// Central object with all translations - initialized immediately
const translations: Record<Language, Record<string, string>> = {
    'en': {
        'SETTINGS_HEADER': 'Money Manager Settings',
        'SETTINGS_LANGUAGE': 'Language',
        'SETTINGS_LANGUAGE_DESC': 'Select the plugin language. Reloading Obsidian is required for the change to apply throughout the interface.',
        'SETTINGS_LANGUAGE_PT_BR': 'Portuguese (Brazil)',
        'SETTINGS_LANGUAGE_EN': 'English (English)',
        // Commands and Ribbon
        'RIBBON_OPEN_NEXUS_HUB': 'Open Money Manager',
        'RIBBON_OPEN_REPORTS': 'Open Reports',
        'COMMAND_OPEN_NEXUS_HUB': 'Open Money Manager',
        'COMMAND_EDIT_USER_INFO': 'Edit user information',
        'COMMAND_IMPORT_CSV': 'Import transactions from a CSV file',
        'COMMAND_RESET_DATA': 'Reset all Money Manager data',
        'COMMAND_EXPORT_BACKUP': 'Export full data backup',
        'COMMAND_IMPORT_BACKUP': 'Import from a backup',
        // Notices and Confirmations
        'RESET_DATA_CONFIRM_1': "This action is irreversible and will delete ALL your financial data (transactions, goals, cards, etc.) and reset your profile. To confirm, type '{keyword}'.",
        'RESET_DATA_CONFIRM_2': "FINAL WARNING: All data will be lost and you will need to reconfigure your profile. Type '{keyword}' to proceed.",
        'RESET_DATA_SUCCESS': 'All Money Manager data has been reset.',
        'RESET_DATA_CONFIRM_KEYWORD_1': 'delete all',
        'RESET_DATA_CONFIRM_KEYWORD_2': 'confirm',
        // General
        'MODAL_EDIT_BUTTON': 'Edit',
        'MODAL_DELETE_BUTTON': 'Delete',
        'MODAL_SAVE_BUTTON': 'Save',
        'MODAL_CANCEL_BUTTON': 'Cancel',
        'MODAL_CONFIRM_BUTTON': 'Confirm',
        'MODAL_CREATE_BUTTON': 'Create',
        'STATUS_PAID': 'Paid',
        'STATUS_PENDING': 'Pending',
        'CATEGORY_SALARY': 'Salary',
        'CATEGORY_EXTRA_INCOME': 'Extra Income',
        // Modals
        'MODAL_GOALS_TITLE': 'Goals Dashboard',
        'MODAL_GOALS_EMPTY_FILTERED': "No '{goalType}' goals found.",
        'MODAL_GOALS_EMPTY_ALL': 'No goals found. Create one to get started!',
        'MODAL_GOALS_CREATE_DEBT_GROUP': '+ Group Debts',
        'MODAL_GOALS_CREATE_NEW': '+ Create New Goal',
        'MODAL_GOALS_PROGRESS_OF': 'of',
        'MODAL_GOALS_CONTRIBUTION_VALUE': 'Value',
        'MODAL_GOALS_CONTRIBUTE_BUTTON': '+ Contribute',
        'MODAL_GOALS_COMPLETED_NOTICE': "Congratulations! You completed the goal: {goalName}",
        'MODAL_GOALS_DELETE_TITLE': 'Delete Goal',
        'MODAL_GOALS_DELETE_CONFIRM': 'Are you sure you want to delete the goal "{goalName}"? This action cannot be undone.',
        'MODAL_ACHIEVEMENTS_TITLE': 'Achievements Panel',
        'MODAL_ACHIEVEMENTS_UNLOCKED_ON': 'Unlocked on: {date}',
        'MODAL_ADD_CARD_TITLE': 'Add New Card',
        'MODAL_ADD_CARD_NAME': 'Card Name',
        'MODAL_ADD_CARD_LIMIT': 'Card Limit ($)',
        'MODAL_ADD_CARD_CLOSING_DAY': 'Closing Day',
        'MODAL_ADD_CARD_DUE_DAY': 'Due Day',
        'MODAL_ADD_CARD_SAVE_BUTTON': 'Save Card',
        'MODAL_ADD_CARD_INVALID_FIELDS_NOTICE': 'Please fill all fields with valid values.',
        'MODAL_MANAGE_CARDS_TITLE': 'Manage Credit Cards',
        'MODAL_MANAGE_CARDS_EMPTY': 'No credit cards registered.',
        'MODAL_MANAGE_CARDS_LIMIT_LABEL': 'Limit: {limit}',
        'MODAL_MANAGE_CARDS_DETAILS_BUTTON': 'Bill Details',
        'MODAL_MANAGE_CARDS_DELETE_TITLE': 'Delete Card',
        'MODAL_MANAGE_CARDS_DELETE_CONFIRM': 'Are you sure you want to delete the card "{cardName}"?',
        'MODAL_MANAGE_CARDS_ADD_NEW_TITLE': 'Add New Card',
        'MODAL_MANAGE_CARDS_ADD_NEW_DESC': 'Click to register a new credit card.',
        'MODAL_MANAGE_CARDS_ADD_NEW_BUTTON': '+ Add Card',
        'MODAL_EDIT_PROFILE_TITLE': 'Edit Profile',
        'MODAL_EDIT_PROFILE_NAME': 'Your name',
        'MODAL_EDIT_PROFILE_INCOME': 'Your net monthly income ($)',
        'TRANSACTION_MONTHLY_INCOME': 'Monthly Income',
        'MODAL_EXTRA_INCOME_TITLE': "Month's Extra Income",
        'MODAL_EXTRA_INCOME_DESC': 'Registering income for {monthYear}',
        'MODAL_EXTRA_INCOME_DELETE_TOOLTIP': 'Delete Income',
        'MODAL_EXTRA_INCOME_DELETE_TITLE': 'Delete Extra Income',
        'MODAL_EXTRA_INCOME_DELETE_CONFIRM': 'Are you sure you want to delete the income "{incomeName}"?',
        'MODAL_EXTRA_INCOME_EMPTY': 'No extra income registered for this month.',
        'MODAL_EXTRA_INCOME_ADD_NEW_TITLE': 'Add New Extra Income',
        'MODAL_EXTRA_INCOME_DESCRIPTION': 'Description',
        'MODAL_EXTRA_INCOME_DESCRIPTION_PLACEHOLDER': 'E.g., Monitor sale',
        'MODAL_EXTRA_INCOME_VALUE': 'Value ($)',
        'MODAL_EXTRA_INCOME_DATE': 'Date Received',
        'MODAL_EXTRA_INCOME_ADD_BUTTON': '+ Add Income',
        'MODAL_EXTRA_INCOME_REQUIRED_FIELDS_NOTICE': 'Description and value are required.',
        'MODAL_MANAGE_BUDGETS_TITLE': 'Manage Budgets',
        'MODAL_MANAGE_BUDGETS_PLACEHOLDER': 'E.g., 800.00',
        'MODAL_ADD_TRANSACTION_TITLE': 'Add Transaction',
        'MODAL_ADD_TRANSACTION_IS_RECURRING': 'Is this a recurring expense?',
        'MODAL_ADD_TRANSACTION_VALUE': 'Value ($)',
        'MODAL_ADD_TRANSACTION_DESCRIPTION': 'Description',
        'MODAL_ADD_TRANSACTION_OTHER_DESCRIPTION': 'Other Description',
        'MODAL_ADD_TRANSACTION_STANDARD_OPTION_LIGHT': 'Electricity',
        'MODAL_ADD_TRANSACTION_STANDARD_OPTION_WATER': 'Water',
        'MODAL_ADD_TRANSACTION_STANDARD_OPTION_GAS': 'Gas',
        'MODAL_ADD_TRANSACTION_STANDARD_OPTION_INTERNET': 'Internet (Variable)',
        'MODAL_ADD_TRANSACTION_OTHER_OPTION': '[+] Other...',
        'MODAL_ADD_TRANSACTION_SUGGESTED_CATEGORY_NOTICE': 'Suggested category: {category}',
        'MODAL_ADD_TRANSACTION_DUE_DATE': 'Due Date',
        'MODAL_ADD_TRANSACTION_RECURRING_DESC_PLACEHOLDER': 'E.g., Rent, Netflix Subscription',
        'MODAL_ADD_TRANSACTION_RECURRING_DUE_DAY': 'Due Day (1-31)',
        'MODAL_ADD_TRANSACTION_RECURRING_END_DATE': 'Recurring end date',
        'MODAL_ADD_TRANSACTION_RECURRING_HAS_END_DATE': 'Does it have an end date?',
        'MODAL_ADD_TRANSACTION_REQUIRED_FIELDS_NOTICE': 'Description and value are required.',
        'MODAL_ADD_TRANSACTION_SUCCESS_NOTICE': 'Transaction(s) saved successfully!',
        'MODAL_CREATE_EDIT_GOAL_EDIT_TITLE': 'Editing Goal: {goalName}',
        'MODAL_CREATE_EDIT_GOAL_NEW_TITLE': 'What is the type of your new goal?',
        'MODAL_CREATE_EDIT_GOAL_TYPE_SAVING_TITLE': 'Save Money',
        'MODAL_CREATE_EDIT_GOAL_TYPE_SAVING_DESC': 'Set a goal to save money, like for a trip or an asset.',
        'MODAL_CREATE_EDIT_GOAL_TYPE_DEBT_TITLE': 'Pay Off Debts',
        'MODAL_CREATE_EDIT_GOAL_TYPE_DEBT_DESC': 'Group existing debts (like installment purchases) to focus on paying them off.',
        'MODAL_CREATE_EDIT_GOAL_NAME': 'Goal Name',
        'MODAL_CREATE_EDIT_GOAL_NAME_PLACEHOLDER': 'E.g., Beach trip, Pay off Nubank card',
        'MODAL_CREATE_EDIT_GOAL_TARGET_AMOUNT': 'Total Goal Amount ($)',
        'MODAL_CREATE_EDIT_GOAL_TARGET_DATE': 'Target Date',
        'MODAL_CREATE_EDIT_GOAL_GROUP_DEBTS_TITLE': 'Group Debts',
        'MODAL_CREATE_EDIT_GOAL_GROUP_DEBTS_DESC': 'Select the installment purchases you want to group into this goal to pay off faster.',
        'MODAL_CREATE_EDIT_GOAL_NO_INSTALLMENTS_FOUND': 'No installment purchases found to link.',
        'MODAL_CREATE_EDIT_GOAL_SAVE_CHANGES_BUTTON': 'Save Changes',
        'MODAL_CREATE_EDIT_GOAL_CREATE_DEBT_BUTTON': 'Create Payoff Goal',
        'MODAL_CREATE_EDIT_GOAL_CREATE_SAVING_BUTTON': 'Create Savings Goal',
        'MODAL_CREATE_EDIT_GOAL_INCOMPLETE_NOTICE': 'Goal information is incomplete.',
        'MODAL_PURCHASE_DETAIL_ERROR_TITLE': 'Error',
        'MODAL_PURCHASE_DETAIL_NOT_FOUND': 'No purchase found with this ID.',
        'MODAL_PURCHASE_DETAIL_TOTAL_AMOUNT': 'Total Purchase Amount',
        'MODAL_PURCHASE_DETAIL_CATEGORY': 'Category',
        'MODAL_PURCHASE_DETAIL_TOTAL_INSTALLMENTS': 'Total Installments',
        'MODAL_PURCHASE_DETAIL_INSTALLMENTS_TITLE': 'Installment Details',
        'MODAL_PURCHASE_DETAIL_DUE_DATE': 'Due: {date}',
        'MODAL_CARD_BILL_TITLE': 'Bill - {cardName}',
        'MODAL_CARD_BILL_NOT_FOUND': 'Credit card not found.',
        'MODAL_CARD_BILL_HEADER': 'Bill for {monthYear} (Due {dueDate}): {total}',
        'MODAL_CARD_BILL_ITEMS_TITLE': 'Items on Bill',
        'MODAL_CARD_BILL_EDIT_PURCHASE_TOOLTIP': 'Edit Purchase',
        'MODAL_CARD_BILL_EDIT_ONLY_INSTALLMENTS_NOTICE': 'Editing is only available for installment purchases.',
        'MODAL_CARD_BILL_EDIT_ORIGINAL_NOT_FOUND_NOTICE': 'Could not find original purchase data for editing.',
        'MODAL_CARD_BILL_DELETE_PURCHASE_TOOLTIP': 'Delete Purchase',
        'MODAL_CARD_BILL_DELETE_ONLY_INSTALLMENTS_NOTICE': 'Deletion is only available for installment purchases.',
        'MODAL_CARD_BILL_DELETE_TITLE': 'Delete Purchase',
        'MODAL_CARD_BILL_DELETE_CONFIRM': 'Are you sure you want to delete the purchase "{purchaseName}" and ALL its installments (including paid ones)? This action cannot be undone.',
        'MODAL_CARD_BILL_EMPTY': 'No purchases for the {monthYear} bill.',
        'MODAL_CARD_BILL_ADD_PURCHASE_BUTTON': '+ Add Purchase to Bill',
        'MODAL_EDIT_PURCHASE_TITLE': 'Edit Card Purchase',
        'MODAL_EDIT_PURCHASE_DESCRIPTION': 'Description',
        'MODAL_EDIT_PURCHASE_TOTAL_AMOUNT': 'Total Amount ($)',
        'MODAL_EDIT_PURCHASE_TOTAL_INSTALLMENTS': 'Total # of Installments',
        'MODAL_EDIT_PURCHASE_DATE': 'Purchase Date',
        'MODAL_EDIT_PURCHASE_INSTALLMENTS_PAID': 'Installments already paid',
        'MODAL_EDIT_PURCHASE_SAVE_BUTTON': 'Save Changes',
        'MODAL_EDIT_PURCHASE_REQUIRED_FIELDS_NOTICE': 'Description, total amount, and number of installments are required.',
        'MODAL_EDIT_PURCHASE_PAID_EXCEEDS_TOTAL_NOTICE': 'The number of paid installments cannot be equal to or greater than the total number of installments.',
        'MODAL_EDIT_PURCHASE_CARD_NOT_FOUND_NOTICE': 'Credit card not found.',
        'MODAL_EDIT_PURCHASE_SUCCESS_NOTICE': 'Purchase updated successfully!',
        'MODAL_ADD_PURCHASE_TITLE': 'Add Card Purchase',
        'MODAL_ADD_PURCHASE_INSTALLMENTS_PAID': 'How many installments have been paid?',
        'MODAL_ADD_PURCHASE_SAVE_BUTTON': 'Save Purchase',
        'MODAL_ADD_PURCHASE_SUCCESS_NOTICE': 'Purchase and future installments registered successfully!',
        'MODAL_ACCOUNT_DETAIL_NOT_FOUND': 'Transaction group not found.',
        'MODAL_ACCOUNT_DETAIL_EDIT_BUTTON': 'Edit',
        'MODAL_ACCOUNT_DETAIL_PAUSE_BUTTON': 'Pause Recurrence',
        'MODAL_ACCOUNT_DETAIL_CATEGORY': 'Category: {category}',
        'MODAL_ACCOUNT_DETAIL_MONTHLY_AMOUNT': 'Monthly Amount: {amount}',
        'MODAL_ACCOUNT_DETAIL_FUTURE_PAYMENTS': 'Future Payments',
        'MODAL_ACCOUNT_DETAIL_PAUSED_UNTIL': '{amount} (Paused until {date})',
        'MODAL_ACCOUNT_DETAIL_NO_FUTURE_PAYMENTS': 'No pending future payments.',
        'MODAL_ACCOUNT_DETAIL_PAYMENT_HISTORY': 'Payment History',
        'MODAL_ACCOUNT_DETAIL_NO_PAYMENT_HISTORY': 'No payments registered.',
        'MODAL_EDIT_ACCOUNT_TITLE': 'Edit "{groupName}"',
        'MODAL_EDIT_ACCOUNT_GROUP_NAME': 'Group Name',
        'MODAL_PAUSE_RECURRING_TITLE': 'Pause "{groupName}"',
        'MODAL_PAUSE_RECURRING_DESC': 'Recurring transactions will be ignored in calculations until the selected date.',
        'MODAL_PAUSE_RECURRING_DATE_LABEL': 'Pause until date:',
        'MODAL_PAUSE_RECURRING_SAVE_BUTTON': 'Save Pause',
        'MODAL_PAUSE_RECURRING_REMOVE_BUTTON': 'Remove Pause',
        'MODAL_PAUSE_RECURRING_DATE_REQUIRED_NOTICE': 'Please select a date.',
        'MODAL_PAUSE_RECURRING_SUCCESS_NOTICE': 'Recurrence paused until {date}.',
        'MODAL_PAUSE_RECURRING_REMOVED_NOTICE': 'Pause removed from recurrence.',
        'MODAL_ONBOARDING_UPDATE_TITLE': 'Update Information',
        'MODAL_ONBOARDING_WELCOME_TITLE': 'Welcome to Money Manager!',
        'MODAL_ONBOARDING_WELCOME_DESC': "Let's set up some basic things to get started.",
        'MODAL_ONBOARDING_NAME_LABEL': 'Your name',
        'MODAL_ONBOARDING_NAME_PLACEHOLDER': 'Name',
        'MODAL_ONBOARDING_INCOME_LABEL': 'Your net monthly income ($)',
        'MODAL_ONBOARDING_SAVE_BUTTON': 'Save Changes',
        'MODAL_ONBOARDING_START_BUTTON': 'Start Using',
        'MODAL_ONBOARDING_NAME_REQUIRED_NOTICE': 'Please enter your name.',
        'MODAL_ONBOARDING_INCOME_REQUIRED_NOTICE': 'Please enter a valid monthly income.',
        'MODAL_EMERGENCY_FUND_TITLE': 'Emergency Fund',
        'MODAL_EMERGENCY_FUND_DESC': "You never know what might happen, right? How about saving some money for those tense moments?",
        'MODAL_EMERGENCY_FUND_BALANCE': 'Current Balance: {balance}',
        'MODAL_EMERGENCY_FUND_CONFIG_TITLE': 'Set Up Monthly Contribution',
        'MODAL_EMERGENCY_FUND_CONTRIBUTION_LABEL': 'Monthly Contribution ($)',
        'MODAL_EMERGENCY_FUND_CONTRIBUTION_DESC': 'Set how much you want to save each month.',
        'MODAL_EMERGENCY_FUND_ENABLE_LABEL': 'Enable monthly contribution',
        'MODAL_EMERGENCY_FUND_SAVE_CONFIG_BUTTON': 'Save Settings',
        'MODAL_EMERGENCY_FUND_TRANSACTION_TITLE': 'Make a Deposit or Withdrawal',
        'MODAL_EMERGENCY_FUND_TRANSACTION_AMOUNT_LABEL': 'Transaction Amount ($)',
        'MODAL_EMERGENCY_FUND_DEPOSIT_BUTTON': '+ Add to Balance',
        'MODAL_EMERGENCY_FUND_DEPOSIT_SUCCESS_NOTICE': '{amount} added to the reserve.',
        'MODAL_EMERGENCY_FUND_INVALID_AMOUNT_NOTICE': 'Please enter a valid amount.',
        'MODAL_EMERGENCY_FUND_WITHDRAW_BUTTON': '- Withdraw from Balance',
        'TRANSACTION_EMERGENCY_FUND_WITHDRAWAL': 'Emergency Fund Withdrawal',
        'MODAL_EMERGENCY_FUND_WITHDRAW_SUCCESS_NOTICE': 'Withdrawal of {amount} registered as extra income.',
        'MODAL_EMERGENCY_FUND_INSUFFICIENT_FUNDS_NOTICE': 'Insufficient balance for withdrawal.',
        'MODAL_EMERGENCY_FUND_HISTORY_TITLE': 'Transaction History',
        'MODAL_EMERGENCY_FUND_HISTORY_EMPTY': 'No transactions recorded.',
        'MODAL_EMERGENCY_FUND_HISTORY_TYPE_DEPOSIT': 'Deposit',
        'MODAL_EMERGENCY_FUND_HISTORY_TYPE_WITHDRAWAL': 'Withdrawal',
        'TRANSACTION_EMERGENCY_FUND_CONTRIBUTION': 'Monthly Contribution',
        'MODAL_EMERGENCY_FUND_CONTRIBUTION_SCHEDULED_NOTICE': 'Monthly contribution of {amount} for the emergency fund has been scheduled.',
        'MODAL_EMERGENCY_FUND_CONTRIBUTION_DISABLED_NOTICE': 'Monthly contribution for the emergency fund has been disabled.',
        'MODAL_NEXUS_SCORE_HISTORY_TITLE': 'Nexus Score History',
        'MODAL_NEXUS_SCORE_HISTORY_CURRENT_SCORE': 'Current Score:',
        'MODAL_NEXUS_SCORE_HISTORY_EMPTY': 'No score history found.',
        // Main View (view.ts)
        'VIEW_GREETING': 'Hello, {userName}!',
        'VIEW_WELCOME': 'Welcome to Money Manager!',
        'VIEW_NEXUS_SCORE_LABEL': 'Nexus Score: {score}',
        'VIEW_NEXUS_SCORE_TOOLTIP': 'Click to see history',
        'VIEW_INCOME_SALARY': 'Salary',
        'VIEW_INCOME_EXTRAS': 'Extras',
        'VIEW_INCOME_TOTAL': 'Total',
        'VIEW_MONTHLY_SUMMARY_TITLE': 'Monthly Summary',
        'VIEW_SUMMARY_CARD_REVENUE': 'Total Revenue',
        'VIEW_SUMMARY_CARD_PENDING': 'Pending Expenses',
        'VIEW_SUMMARY_CARD_PAID': 'Already Paid This Month',
        'VIEW_SUMMARY_CARD_PROJECTION': 'Projection (30 days)',
        'VIEW_MANAGEMENT_TITLE': 'Management',
        'VIEW_ADD_TRANSACTION_BUTTON': 'Add Transaction',
        'VIEW_NAV_BUDGETS': 'Set Budgets',
        'VIEW_NAV_EXTRA_INCOME': 'Extra Income',
        'VIEW_NAV_GOALS': 'Goals Dashboard',
        'VIEW_NAV_FUTURE_LEDGER': 'View Future Ledger',
        'VIEW_NAV_CARDS': 'Manage Cards',
        'VIEW_NAV_EMERGENCY_FUND': 'Emergency Fund',
        'VIEW_NAV_REPORTS': 'Reports',
        'VIEW_NAV_ACHIEVEMENTS': 'Achievements',
        'VIEW_BUDGETS_TITLE': "Month's Budgets",
        'VIEW_TRANSACTIONS_TITLE': "Month's Transactions",
        'VIEW_TRANSACTIONS_PENDING_TAB': 'To Pay',
        'VIEW_TRANSACTIONS_PAID_TAB': 'Paid This Month',
        'VIEW_FOCUS_MODE_TOOLTIP': 'Focus Mode',
        'VIEW_UPCOMING_BILL_NOTICE': "Reminder: '{description}' is due {dueDate}.",
        'VIEW_RECURRING_TRANSACTION_TOOLTIP': 'Recurring Transaction',
        'VIEW_SINGLE_TRANSACTION_TOOLTIP': 'Single Transaction',
        'VIEW_PAUSED_TOOLTIP': 'Paused until {date}',
        'VIEW_DUE_DATE_LABEL': 'Due on {date}',
        'VIEW_DUE_SOON_TOOLTIP_SINGULAR': 'Due in 1 day',
        'VIEW_DUE_SOON_TOOLTIP_PLURAL': 'Due in {days} days',
        'VIEW_DUPLICATE_TRANSACTION_TOOLTIP': 'Duplicate Transaction',
        'VIEW_PAY_WITH_EF_TOOLTIP': 'Pay with Emergency Fund',
        'VIEW_CREDIT_CARD_INVOICE_TOOLTIP': 'Credit Card Bill',
        'VIEW_INVOICE_NAME': '{cardName} Bill',
        'VIEW_EMPTY_PENDING_TRANSACTIONS': 'No pending transactions for this month. Good job!',
        'VIEW_EMPTY_PAID_TRANSACTIONS': 'No transactions have been paid this month yet.',
        'VIEW_ALERT_ATTENTION': 'Attention:',
        'VIEW_NEGATIVE_PROJECTION_ALERT': ' Your projection indicates your balance may go negative around {date}. Review your future entries.',
        'VIEW_NO_BUDGETS_DEFINED': 'No budgets defined.',
        'VIEW_BUDGET_SPENT_LABEL': 'Spent: {spent} of {total}',
        'VIEW_BUDGET_REMAINING_LABEL': 'Remaining: {remaining}',
        'VIEW_SUMMARY_CARD_SURPLUS': "Month's Surplus",
        'VIEW_NEGATIVE_SURPLUS_ALERT': 'Attention: Your balance for this month is negative by {amount}. Review your entries.',
        // Danger Zone in Settings
        'SETTINGS_DANGER_ZONE_HEADER': 'Danger Zone',
        'SETTINGS_DANGER_ZONE_DESC': 'Destructive actions that cannot be undone.',
        'SETTINGS_RESET_DATA_BUTTON': 'Delete All Data',
        'SETTINGS_OPEN_TOOLTIP': 'Open plugin settings',
        // Improved Budget Modal
        'MODAL_MANAGE_BUDGETS_EXISTING_HEADER': 'Current Budgets',
        'MODAL_MANAGE_BUDGETS_NO_BUDGETS': 'No budgets defined. Add one to get started.',
        'MODAL_MANAGE_BUDGETS_ADD_NEW_HEADER': 'Add New Budget',
        'MODAL_MANAGE_BUDGETS_SELECT_CATEGORY': 'Select a category',
        'MODAL_MANAGE_BUDGETS_AMOUNT_PLACEHOLDER': 'Budget Amount ($)',
        'MODAL_MANAGE_BUDGETS_ADD_BUTTON': '+ Add Budget',
        'MODAL_MANAGE_BUDGETS_DELETE_TOOLTIP': 'Remove Budget',
        'MODAL_MANAGE_BUDGETS_NO_MORE_CATEGORIES': 'All expense categories already have a budget.',
        // Future Ledger View (future-ledger-view.ts)
        'FUTURE_LEDGER_VIEW_TITLE': 'Future Ledger',
        'FUTURE_LEDGER_PROJECTED_BALANCE_CHART_TITLE': 'Projected Balance',
        'FUTURE_LEDGER_SEARCH_PLACEHOLDER': 'Search by description...',
        'FUTURE_LEDGER_ALL_CATEGORIES': 'All Categories',
        'FUTURE_LEDGER_EMPTY_LIST': 'No future entries found with the current filters.',
        'FUTURE_LEDGER_DATE_FORMAT': 'dddd, MMMM DD',
        'FUTURE_LEDGER_CHART_LABEL': 'Projected Balance (30 days)',
        // Report View (report-view.ts)
        'REPORT_VIEW_TITLE': 'Financial Reports',
        'REPORT_VIEW_FROM_LABEL': 'From:',
        'REPORT_VIEW_TO_LABEL': 'To:',
        'REPORT_VIEW_PRESET_30D': '30 days',
        'REPORT_VIEW_PRESET_90D': '90 days',
        'REPORT_VIEW_PRESET_1Y': '1 Year',
        'REPORT_VIEW_PRESET_YTD': 'Year to Date',
        'REPORT_VIEW_EXPORT_BUTTON': 'Export',
        'REPORT_VIEW_KPI_BALANCE': 'Period Balance',
        'REPORT_VIEW_KPI_SAVINGS_RATE': 'Savings Rate',
        'REPORT_VIEW_KPI_TOP_SPEND': 'Top Spending',
        'REPORT_VIEW_KPI_AVG_DAILY': 'Avg. Daily Spending',
        'REPORT_VIEW_ANALYSIS_TITLE': 'Period Analysis',
        'REPORT_VIEW_SPENDING_BY_CAT_TITLE': 'Spending by Category',
        'REPORT_VIEW_INCOME_VS_EXPENSE_TITLE': 'Income vs. Expense',
        'REPORT_VIEW_CASH_FLOW_TITLE': 'Cash Flow (Income -> Expenses)',
        'REPORT_VIEW_NET_WORTH_TITLE': 'Net Worth Evolution',
        'REPORT_VIEW_DRILLDOWN_TITLE': 'Details for: {category}',
        'REPORT_VIEW_BACK_BUTTON': '‹ Back',
        'REPORT_VIEW_DRILLDOWN_CHART_LABEL': 'Expenses in {category}',
        'REPORT_VIEW_SANKEY_CHART_LABEL': 'Cash Flow',
        'REPORT_VIEW_SANKEY_SAVED': 'Saved',
        'REPORT_VIEW_SANKEY_TOTAL_INCOME': 'Total Income',
        'REPORT_VIEW_SANKEY_TOOLTIP': '{from} -> {to}: {flow}',
        'REPORT_VIEW_NET_WORTH_CHART_LABEL': 'Net Worth',
        'REPORT_VIEW_NET_WORTH_TOOLTIP_BALANCE': 'Balance: {balance}',
        'REPORT_VIEW_NET_WORTH_TOOLTIP_CHANGE': 'Change: {change}',
        'REPORT_VIEW_ANNUAL_SUMMARY_TITLE': 'Annual Summary for {year}',
        'REPORT_VIEW_ANNUAL_KPI_INCOME': 'Total Annual Income',
        'REPORT_VIEW_ANNUAL_KPI_EXPENSE': 'Total Annual Expense',
        'REPORT_VIEW_ANNUAL_KPI_BALANCE': 'Annual Balance',
        'REPORT_VIEW_ANNUAL_KPI_AVG_SAVINGS': 'Avg. Monthly Savings',
        'REPORT_VIEW_ANNUAL_CHART_LABEL': 'Total Spending in {year}',
        'REPORT_VIEW_EXPORT_NOTICE_GENERATING': 'Generating Excel report...',
        'REPORT_VIEW_EXPORT_NOTICE_ERROR': 'An error occurred while generating the Excel report.',
        'REPORT_VIEW_EXPORT_SHEET_SPENDING': 'Spending by Category',
        'REPORT_VIEW_EXPORT_SHEET_FLOW': 'Cash Flow',
        'REPORT_VIEW_EXPORT_SHEET_ALL_TX': 'All Transactions',
        'REPORT_VIEW_EXPORT_HEADER_CATEGORY': 'Category',
        'REPORT_VIEW_EXPORT_HEADER_SPENT': 'Amount Spent',
        'REPORT_VIEW_EXPORT_HEADER_MONTH': 'Month',
        'REPORT_VIEW_EXPORT_HEADER_INCOME': 'Income',
        'REPORT_VIEW_EXPORT_HEADER_EXPENSE': 'Expenses',
        'REPORT_VIEW_EXPORT_HEADER_DATE': 'Date',
        'REPORT_VIEW_EXPORT_HEADER_DESC': 'Description',
        'REPORT_VIEW_EXPORT_HEADER_TYPE': 'Type',
        'REPORT_VIEW_EXPORT_HEADER_VALUE': 'Value',
        'REPORT_VIEW_EXPORT_HEADER_STATUS': 'Status',
        'REPORT_VIEW_EXPORT_TYPE_INCOME': 'Income',
        'REPORT_VIEW_EXPORT_TYPE_EXPENSE': 'Expense',
        'REPORT_VIEW_EXPORT_STATUS_PAID': 'Paid',
        'REPORT_VIEW_EXPORT_STATUS_PENDING': 'Pending',
        'REPORT_VIEW_EXPORT_FILENAME': 'NexusHub_Report_{date}',
        // Report Generator (report-generator.ts)
        'REPORT_GENERATOR_INSIGHT_BALANCE_POS': 'Positive balance of {balance} for the period. Great job!',
        'REPORT_GENERATOR_INSIGHT_BALANCE_NEG': 'Warning! Your balance was negative by {balance} for the period.',
        'REPORT_GENERATOR_INSIGHT_SAVINGS_EXCELLENT': 'Your savings rate of {rate}% is excellent. Keep it up!',
        'REPORT_GENERATOR_INSIGHT_SAVINGS_GOOD': 'You saved {rate}% of your income. A good start!',
        'REPORT_GENERATOR_INSIGHT_SAVINGS_NEG': 'Your savings rate was negative. Review your spending to improve.',
        'REPORT_GENERATOR_INSIGHT_TOP_SPEND': 'Your top spending category was "{category}", totaling {amount}.',
        'REPORT_GENERATOR_NO_DATA': 'N/A',
        // Achievements (achievements.ts)
        'ACHIEVEMENT_UNLOCKED_NOTICE': '🏆 Achievement unlocked: {name}!',
        // Goal Types (for storage)
        'GOAL_TYPE_SAVING': 'Save Money',
        'GOAL_TYPE_DEBT': 'Pay Off Debt',
        // Internal Logic and Notices
        'TRANSACTION_NOT_FOUND': 'Transaction not found.',
        'EMERGENCY_FUND_PAYMENT_REASON': 'Payment for: {description}',
        'EMERGENCY_FUND_PAYMENT_SUCCESS': "'{description}' paid with Emergency Fund.",
        'NEXUS_SCORE_REASON_BULK_PAYMENT': 'Payment of {count} item(s).',
        'NEXUS_SCORE_REASON_DEBT_GOAL_COMPLETED': "Debt goal '{goalName}' completed!",
        'NEXUS_SCORE_REASON_SAVING_GOAL_COMPLETED': "Goal '{goalName}' completed!",
        'DEBT_GOAL_COMPLETED_NOTICE': "🎉 Congratulations! You paid off all debts for the goal: {goalName}",
        'DATA_MIGRATION_NOTICE': 'Money Manager: Data updated to the new version.'
    }
};

/**
 * Define o idioma a ser usado pelo tradutor.
 * Chamado no 'onload' do plugin e ao alterar a configuração.
 * @param lang A linguagem definida nas configurações do plugin.
 */
export function setLanguage(lang: any) {
    // Validate that the language is supported, fallback to 'en' otherwise
    const supportedLanguages: Language[] = ['en'];
    if (supportedLanguages.includes(lang)) {
        language = lang as Language;
    } else {
        console.warn(`Unsupported language '${lang}' detected, falling back to English`);
        language = 'en';
    }
}

/**
 * Função tradutora principal.
 * @param key A chave da string a ser traduzida.
 * @param vars Um objeto com variáveis para substituir na string (ex: {nome: 'Mundo'}).
 * @returns The translated string. If not found, returns the key itself.
 */
export function t(key: string, vars?: Record<string, string | number>): string {
    // Ensure language is valid, fallback to 'en' if undefined
    const currentLang = language || 'en';

    // Get translation with fallback to key if not found
    let text = translations[currentLang]?.[key];

    // If translation not found, log warning and return key
    if (!text) {
        console.warn(`Translation key not found: ${key} for language: ${currentLang}`);
        text = key;
    }

    // Replace variables if provided
    if (vars) {
        for (const varKey in vars) {
            const regex = new RegExp(`{${varKey}}`, 'g');
            text = text.replace(regex, String(vars[varKey]));
        }
    }

    return text;
}